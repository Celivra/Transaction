<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${product.name} + ' - 商品详情'">商品详情</title>
    <link rel="stylesheet" th:href="@{/css/product.css}">
    <link rel="stylesheet" th:href="@{/css/head.css}">
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<div class="container">
    <!-- 商品图片 -->
    <div class="product-detail">

        <h2 th:text="${product.name}">商品名称</h2>
        <p><strong>价格：</strong><span th:text="${product.price}"></span> 元</p>
        <img th:src="@{${product.image}}" alt="Product Image" class="product-image"/>
        <p><strong>分类：</strong><span th:text="${product.category}"></span></p>
        <p><strong>成色/状态：</strong><span th:text="${product.condition}"></span></p>
        <p><strong>状态：</strong><span th:text="${product.status}"></span></p>
        <p><strong>描述：</strong></p>
        <p th:text="${product.description}"></p>

        <!-- 卖家信息 -->
        <div class="seller-section">
            <span><strong>卖家：</strong><span th:text="${seller.username}"></span></span>
            <a th:href="'mailto:' + ${seller.email}" class="btn">联系卖家</a>
        </div>

        <div class="order-section">
            <form th:action="@{/Order}" method="get">
                <input type="hidden" name="productId" th:value="${product.id}">
                <button type="submit" class="order-btn">立即下单</button>
            </form>
            <p th:if="${orderStatus}"
               th:text="${orderStatus}"
               style="color: red; font-weight: bold;">
            </p>
        </div>
    </div>


    <!-- 评价提交 -->
    <div class="review-section">
        <h3>提交评价</h3>
        <form th:action="@{/submitEvaluate}" method="post">
            <input type="hidden" name="productId" th:value="${product.id}" />
            <textarea style="resize: none; box-sizing: border-box;" name="content" placeholder="写下你的评价..."></textarea>
            <br/>
            <button type="submit" class="btn">提交评价</button>
        </form>
    </div>

    <!-- 已有评价 -->
    <div class="reviews-list">
        <h3>已有评价</h3>
        <div th:if="${#lists.isEmpty(evaluates)}">暂无评价</div>
        <div th:each="eval : ${evaluates}" class="review-item">
            <p th:text="${eval.username}" style="font-weight: bold">用户</p>
            <p th:text="${eval.content}">评价内容</p>
        </div>
    </div>

</div>
</body>
</html>
